# Test: Container exists in both local and CDF with DIFFERENT constraints
# Local ValveContainer has: ValveContainer → TagWithWrongRequiresContainer
# CDF ValveContainer has: ValveContainer → CogniteDescribable (different!)
# Recommendations should be based on LOCAL, not merged
- space: my_space
  externalId: Level01_ValveContainer
  usedFor: node
  properties:
    valveId:
      immutable: false
      nullable: true
      type:
        type: text
        list: false
  constraints:
    cdf_only_constraint:
      constraintType: requires
      require:
        space: cdf_cdm
        externalId: CogniteDescribable
        type: container

# Non-CDM container from CDF (not in local schema) - treated as immutable
- space: external_space
  externalId: ExternalOnlyContainer
  name: ExternalOnlyContainer
  usedFor: node
  properties:
    externalField:
      immutable: false
      nullable: true
      type:
        type: text
        list: false
  constraints:
    req_describable:
      constraintType: requires
      require:
        space: cdf_cdm
        externalId: CogniteDescribable
        type: container

# Test scenario: Multiple external user containers (not CDM, not local)
# Used to test: Can we optimize a view with 1 local + many external containers?
- space: external_space
  externalId: ExternalUserContainerA
  name: External User Container A
  usedFor: node
  properties:
    fieldA:
      immutable: false
      nullable: true
      type:
        type: text
        list: false

- space: external_space
  externalId: ExternalUserContainerB
  name: External User Container B
  usedFor: node
  properties:
    fieldB:
      immutable: false
      nullable: true
      type:
        type: text
        list: false

- space: external_space
  externalId: ExternalUserContainerC
  name: External User Container C
  usedFor: node
  properties:
    fieldC:
      immutable: false
      nullable: true
      type:
        type: text
        list: false
