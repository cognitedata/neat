# Test views for requires constraint recommendations
# Naming: Level01=equipment(root), Level02=tag/asset, Level03=describable(leaf)

# Already correctly configured
- space: my_space
  externalId: PreConfiguredView
  version: v1
  name: Pre-Configured View
  properties:
    rootField:
      name: rootField
      container:
        space: my_space
        externalId: PreConfiguredRootContainer
        type: container
      containerPropertyIdentifier: assetField
    leafField:
      name: leafField
      container:
        space: my_space
        externalId: PreConfiguredLeafContainer
        type: container
      containerPropertyIdentifier: description

# Equipment views: Pump/Valve/Motor → Tag → Describable
# Tag has wrong requires to Sourceable (should be Describable)
- space: my_space
  externalId: PumpView
  version: v1
  name: Pump View
  properties:
    pumpId:
      name: pumpId
      container:
        space: my_space
        externalId: Level01_PumpContainer
        type: container
      containerPropertyIdentifier: pumpId
    tagName:
      name: tagName
      container:
        space: my_space
        externalId: Level02_TagWithWrongRequiresContainer
        type: container
      containerPropertyIdentifier: tagName
    description:
      name: description
      container:
        space: my_space
        externalId: Level03_DescribableContainer
        type: container
      containerPropertyIdentifier: description

- space: my_space
  externalId: ValveView
  version: v1
  name: Valve View
  properties:
    valveId:
      name: valveId
      container:
        space: my_space
        externalId: Level01_ValveContainer
        type: container
      containerPropertyIdentifier: valveId
    tagName:
      name: tagName
      container:
        space: my_space
        externalId: Level02_TagWithWrongRequiresContainer
        type: container
      containerPropertyIdentifier: tagName
    description:
      name: description
      container:
        space: my_space
        externalId: Level03_DescribableContainer
        type: container
      containerPropertyIdentifier: description

- space: my_space
  externalId: MotorView
  version: v1
  name: Motor View
  properties:
    motorId:
      name: motorId
      container:
        space: my_space
        externalId: Level01_MotorContainer
        type: container
      containerPropertyIdentifier: motorId
    tagName:
      name: tagName
      container:
        space: my_space
        externalId: Level02_TagWithWrongRequiresContainer
        type: container
      containerPropertyIdentifier: tagName
    description:
      name: description
      container:
        space: my_space
        externalId: Level03_DescribableContainer
        type: container
      containerPropertyIdentifier: description

# Two equipment containers with no shared intermediate
# Path through Tag would create conflicting orientations (Motor→Tag vs Tag→Pump)
# This view should be flagged as unsolvable
- space: my_space
  externalId: ConflictingEquipmentView
  version: v1
  name: Conflicting Equipment View
  properties:
    motorField:
      name: motorField
      container:
        space: my_space
        externalId: Level01_MotorContainer
        type: container
      containerPropertyIdentifier: motorId
    pumpField:
      name: pumpField
      container:
        space: my_space
        externalId: Level01_PumpContainer
        type: container
      containerPropertyIdentifier: pumpId

# Tag with Asset: Tag, Asset, Describable (no equipment)
- space: my_space
  externalId: TagWithAssetView
  version: v1
  name: Tag With Asset View
  properties:
    tagName:
      name: tagName
      container:
        space: my_space
        externalId: Level02_TagWithWrongRequiresContainer
        type: container
      containerPropertyIdentifier: tagName
    assetName:
      name: assetName
      container:
        space: my_space
        externalId: Level02_AssetContainer
        type: container
      containerPropertyIdentifier: assetName
    description:
      name: description
      container:
        space: my_space
        externalId: Level03_DescribableContainer
        type: container
      containerPropertyIdentifier: description

# Cycle test
- space: my_space
  externalId: CycleTestView
  version: v1
  name: Cycle Test View
  properties:
    propCycleA:
      name: propCycleA
      container:
        space: my_space
        externalId: CycleContainerA
        type: container
      containerPropertyIdentifier: propA
    propCycleB:
      name: propCycleB
      container:
        space: my_space
        externalId: CycleContainerB
        type: container
      containerPropertyIdentifier: propB

# Disconnected groups (never appear together)
- space: my_space
  externalId: DisconnectedGroupAView
  version: v1
  properties:
    groupAField1:
      name: groupAField1
      container:
        space: my_space
        externalId: DisconnectedGroupAContainer1
        type: container
      containerPropertyIdentifier: groupAField1
    groupAField2:
      name: groupAField2
      container:
        space: my_space
        externalId: DisconnectedGroupAContainer2
        type: container
      containerPropertyIdentifier: groupAField2

- space: my_space
  externalId: DisconnectedGroupBView
  version: v1
  properties:
    groupBField1:
      name: groupBField1
      container:
        space: my_space
        externalId: DisconnectedGroupBContainer1
        type: container
      containerPropertyIdentifier: groupBField1
    groupBField2:
      name: groupBField2
      container:
        space: my_space
        externalId: DisconnectedGroupBContainer2
        type: container
      containerPropertyIdentifier: groupBField2

# User containers connected via immutable CDM container
- space: my_space
  externalId: ImmutableBridgeViewA
  version: v1
  properties:
    name:
      name: name
      container:
        space: cdf_cdm
        externalId: CogniteDescribable
        type: container
      containerPropertyIdentifier: name
    userAField:
      name: userAField
      container:
        space: my_space
        externalId: ImmutableBridgeUserAContainer
        type: container
      containerPropertyIdentifier: userAField

- space: my_space
  externalId: ImmutableBridgeViewB
  version: v1
  properties:
    name:
      name: name
      container:
        space: cdf_cdm
        externalId: CogniteDescribable
        type: container
      containerPropertyIdentifier: name
    userBField:
      name: userBField
      container:
        space: my_space
        externalId: ImmutableBridgeUserBContainer
        type: container
      containerPropertyIdentifier: userBField

- space: my_space
  externalId: ImmutableBridgeCombinedView
  version: v1
  properties:
    name:
      name: name
      container:
        space: cdf_cdm
        externalId: CogniteDescribable
        type: container
      containerPropertyIdentifier: name
    userAField:
      name: userAField
      container:
        space: my_space
        externalId: ImmutableBridgeUserAContainer
        type: container
      containerPropertyIdentifier: userAField
    userBField:
      name: userBField
      container:
        space: my_space
        externalId: ImmutableBridgeUserBContainer
        type: container
      containerPropertyIdentifier: userBField

# View-specific vs shared: FuncLoc(1 view), Pump(1 view), Tag(3 views), Describable(3 views)
- space: my_space
  externalId: FunctionalLocationView
  version: v1
  properties:
    funcLocField:
      name: funcLocField
      container:
        space: my_space
        externalId: Level01_FunctionalLocationContainer
        type: container
      containerPropertyIdentifier: funcLocField
    sharedTagField:
      name: sharedTagField
      container:
        space: my_space
        externalId: Level02_SharedTagContainer
        type: container
      containerPropertyIdentifier: sharedTagField
    sharedDescField:
      name: sharedDescField
      container:
        space: my_space
        externalId: Level03_SharedDescribableContainer
        type: container
      containerPropertyIdentifier: sharedDescField

- space: my_space
  externalId: SharedTagView
  version: v1
  properties:
    sharedTagField:
      name: sharedTagField
      container:
        space: my_space
        externalId: Level02_SharedTagContainer
        type: container
      containerPropertyIdentifier: sharedTagField
    sharedAssetField:
      name: sharedAssetField
      container:
        space: my_space
        externalId: Level02_SharedAssetContainer
        type: container
      containerPropertyIdentifier: sharedAssetField
    sharedDescField:
      name: sharedDescField
      container:
        space: my_space
        externalId: Level03_SharedDescribableContainer
        type: container
      containerPropertyIdentifier: sharedDescField

- space: my_space
  externalId: PumpEquipmentView
  version: v1
  properties:
    pumpField:
      name: pumpField
      container:
        space: my_space
        externalId: Level01_PumpEquipmentContainer
        type: container
      containerPropertyIdentifier: pumpField
    sharedTagField:
      name: sharedTagField
      container:
        space: my_space
        externalId: Level02_SharedTagContainer
        type: container
      containerPropertyIdentifier: sharedTagField
    sharedDescField:
      name: sharedDescField
      container:
        space: my_space
        externalId: Level03_SharedDescribableContainer
        type: container
      containerPropertyIdentifier: sharedDescField

# User containers extending CDM (leverages existing CogniteAsset → CogniteDescribable)
- space: my_space
  externalId: CogniteAssetExtensionView
  version: v1
  properties:
    tagField:
      name: tagField
      container:
        space: my_space
        externalId: CogniteAssetExtensionContainer
        type: container
      containerPropertyIdentifier: tagField
    assetPath:
      name: assetPath
      container:
        space: cdf_cdm
        externalId: CogniteAsset
        type: container
      containerPropertyIdentifier: assetHierarchy_path
    descriptionFromCdm:
      name: descriptionFromCdm
      container:
        space: cdf_cdm
        externalId: CogniteDescribable
        type: container
      containerPropertyIdentifier: description

- space: my_space
  externalId: CogniteAssetExtensionSolutionModelScenarioView
  version: v1
  properties:
    equipmentField:
      name: equipmentField
      container:
        space: my_space
        externalId: CogniteAssetExtensionSolutionModelScenarioContainer
        type: container
      containerPropertyIdentifier: equipmentField
    tagFieldShared:
      name: tagFieldShared
      container:
        space: my_space
        externalId: CogniteAssetExtensionContainer
        type: container
      containerPropertyIdentifier: tagField
    descriptionFromCdmEquip:
      name: descriptionFromCdmEquip
      container:
        space: cdf_cdm
        externalId: CogniteDescribable
        type: container
      containerPropertyIdentifier: description

# Local view with external non-CDM container
- space: my_space
  externalId: LocalViewWithExternalContainer
  version: v1
  name: Local View With External Container
  properties:
    localRequiresField:
      name: localRequiresField
      container:
        space: my_space
        externalId: LocalContainerRequiringExternalContainer
        type: container
      containerPropertyIdentifier: localRequiresField

# Test scenario: 1 local container + 3 external user containers
# Expected: ManyExternalsRootContainer should require all 3 external containers
- space: my_space
  externalId: ManyExternalsView
  version: v1
  name: Many Externals View
  properties:
    rootField:
      name: rootField
      container:
        space: my_space
        externalId: ManyExternalsRootContainer
        type: container
      containerPropertyIdentifier: rootField
    fieldA:
      name: fieldA
      container:
        space: external_space
        externalId: ExternalUserContainerA
        type: container
      containerPropertyIdentifier: fieldA
    fieldB:
      name: fieldB
      container:
        space: external_space
        externalId: ExternalUserContainerB
        type: container
      containerPropertyIdentifier: fieldB
    fieldC:
      name: fieldC
      container:
        space: external_space
        externalId: ExternalUserContainerC
        type: container
      containerPropertyIdentifier: fieldC
